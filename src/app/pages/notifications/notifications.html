<div class="max-w-6xl mx-auto space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-foreground">Notifications</h1>
      <p class="text-muted-foreground mt-1">
        Gérez vos notifications et restez informé des événements importants
        @if (unreadCount() > 0) {
          <span class="ml-2 px-2 py-1 bg-primary text-primary-foreground text-xs rounded-full">
            {{ unreadCount() }} non lue{{ unreadCount() > 1 ? 's' : '' }}
          </span>
        }
      </p>
    </div>

    @if (unreadCount() > 0) {
      <button
        (click)="markAllAsRead()"
        class="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors">
        <i class="fas fa-check-double mr-2"></i>
        Tout marquer comme lu
      </button>
    }
  </div>

  <div class="grid gap-6 lg:grid-cols-4">
    <!-- Filtres -->
    <div class="lg:col-span-1">
      <div class="bg-card border rounded-lg p-6 sticky top-4">
        <h2 class="font-semibold text-foreground mb-4">Filtres</h2>
        <div class="space-y-2">
          @for (filter of filters; track filter.value) {
            <button
(click)="setFilter(filter.value)"
              class="flex items-center gap-3 w-full p-3 rounded-lg transition-colors text-left"
              [class.bg-primary]="selectedFilter() === filter.value"
              [class.text-primary-foreground]="selectedFilter() === filter.value"
              [class.hover:bg-accent]="selectedFilter() !== filter.value">
              <i [class]="filter.icon" class="text-sm w-4"></i>
              <span class="font-medium">{{ filter.label }}</span>
              @if (filter.value === 'unread' && unreadCount() > 0) {
                <span class="ml-auto px-2 py-0.5 bg-primary text-primary-foreground text-xs rounded-full">
                  {{ unreadCount() }}
                </span>
              }
            </button>
          }
        </div>
      </div>
    </div>

    <!-- Liste des notifications -->
    <div class="lg:col-span-3">
      @if (filteredNotifications().length === 0) {
        <div class="bg-card border rounded-lg p-12 text-center">
          <i class="fas fa-bell-slash text-4xl text-muted-foreground mb-4"></i>
          <h3 class="text-lg font-semibold text-foreground mb-2">Aucune notification</h3>
          <p class="text-muted-foreground">
            @if (selectedFilter() === 'unread') {
              Toutes vos notifications ont été lues.
            } @else {
              Aucune notification ne correspond à votre filtre.
            }
          </p>
        </div>
      } @else {
        <div class="space-y-4">
          @for (notification of filteredNotifications(); track notification.id) {
            <div
              class="bg-card border rounded-lg p-6 transition-all hover:shadow-md"
              [class.border-l-4]="!notification.read"
              [class.border-l-primary]="!notification.read"
              [class.bg-muted/30]="notification.read">

              <div class="flex items-start gap-4">
                <!-- Icône de type -->
                <div class="flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center"
                     [class.bg-blue-100]="notification.type === 'info'"
                     [class.bg-green-100]="notification.type === 'success'"
                     [class.bg-yellow-100]="notification.type === 'warning'"
                     [class.bg-red-100]="notification.type === 'error'">
                  <i [class]="getNotificationIcon(notification.type)"
                     [class]="getNotificationColor(notification.type)"></i>
                </div>

                <!-- Contenu -->
                <div class="flex-1 min-w-0">
                  <div class="flex items-start justify-between gap-4">
                    <div class="flex-1">
                      <h3 class="font-semibold text-foreground mb-1"
                          [class.font-bold]="!notification.read">
                        {{ notification.title }}
                      </h3>
                      <p class="text-muted-foreground text-sm leading-relaxed">
                        {{ notification.message }}
                      </p>
                      <div class="flex items-center gap-4 mt-3">
                        <span class="text-xs text-muted-foreground">
                          {{ formatTimestamp(notification.timestamp) }}
                        </span>
                        @if (notification.actionUrl) {
                          <button class="text-primary hover:text-primary/80 text-xs font-medium transition-colors">
                            <i class="fas fa-external-link-alt mr-1"></i>
                            Voir détails
                          </button>
                        }
                      </div>
                    </div>

                    <!-- Actions -->
                    <div class="flex items-center gap-2">
                      @if (!notification.read) {
                        <button
                          (click)="markAsRead(notification.id)"
                          class="p-2 text-muted-foreground hover:text-primary rounded-lg hover:bg-accent transition-colors"
                          title="Marquer comme lu">
                          <i class="fas fa-check text-sm"></i>
                        </button>
                      } @else {
                        <div class="w-6 h-6 flex items-center justify-center">
                          <i class="fas fa-check text-green-500 text-sm"></i>
                        </div>
                      }

                      <button
                        (click)="deleteNotification(notification.id)"
                        class="p-2 text-muted-foreground hover:text-destructive rounded-lg hover:bg-accent transition-colors"
                        title="Supprimer">
                        <i class="fas fa-trash text-sm"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          }
        </div>

        <!-- Pagination (si nécessaire pour de nombreuses notifications) -->
        @if (filteredNotifications().length > 10) {
          <div class="flex items-center justify-center mt-8">
            <div class="flex items-center gap-2">
              <button class="p-2 text-muted-foreground hover:text-primary rounded-lg hover:bg-accent transition-colors">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span class="px-4 py-2 text-sm text-muted-foreground">Page 1 sur 1</span>
              <button class="p-2 text-muted-foreground hover:text-primary rounded-lg hover:bg-accent transition-colors">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        }
      }
    </div>
  </div>
</div>